# MAESTRO ESCLAVO
##  MAESTRO
### Configuraci칩n Archivo -Paso 1a
~~~
jed /etc/mysql/mysql.conf.d/mysqld.cnf
~~~
comentamos 
~~~
#bind-address 127.0.0.1
~~~
a침adimos
~~~
log_error = /var/log/mysql/error.log
log_bin = /var/log/mysql/bin.log
server-id = 1
~~~
reiniciamos el servicio
~~~
/etc/init.d/mysql restart 
~~~
### Crear Usuario- Paso 2
~~~
CREATE USER esclavo IDENTIFIED BY 'esclavo';
GRANT REPLICATION SLAVE ON *.* TO 'esclavo'@'%' IDENTIFIED BY 'u4h7j9e3';
FLUSH PRIVILEGES;
FLUSH TABLES;
FLUSH TABLES WITH READ LOCK;
~~~


### Obtenemos Datos Master - Paso 3
~~~
SHOW MASTER STATUS;
~~~
### Desbloqueamos tablas - Paso 5
~~~
UNLOCK TABLES;
~~~
##  ESCLAVO
### Configuraci칩n Archivo - Paso 1b
~~~
jed /etc/mysql/mysql.conf.d/mysqld.cnf
~~~
comentamos 
~~~
#bind-address 127.0.0.1
~~~
a침adimos
~~~
log_error = /var/log/mysql/error.log
log_bin = /var/log/mysql/bin.log
server-id = 2
~~~
reiniciamos el servicio
~~~
/etc/init.d/mysql restart 
~~~
### Cambiamos el Master del esclavo - Paso 4
~~~
CHANGE MASTER TO MASTER_HOST='192.168.31.200',
MASTER_USER='esclavo', MASTER_PASSWORD='esclavo',
MASTER_LOG_FILE='mysql-bin.000001', MASTER_LOG_POS=501,
MASTER_PORT=3306;
~~~


CHANGE MASTER TO MASTER_HOST='alvarospunk.ddns.net',MASTER_USER='esclavo', MASTER_PASSWORD='esclavo',MASTER_LOG_FILE='mysql-bin.000002', MASTER_LOG_POS=154,MASTER_PORT=3306;


~~~
CHANGE MASTER TO MASTER_HOST='172.17.0.2',MASTER_USER='esclavo', MASTER_PASSWORD='u4h7j9e3',MASTER_LOG_FILE='mysql-bin.000010', MASTER_LOG_POS=154,MASTER_PORT=3306;
~~~

iniciamos esclavo
~~~
START SLAVE;
~~~
### Mostramos estado de Esclavo - Paso 6
~~~
SHOW SLAVE STATUS\G
~~~
comprobamos que:
~~~
Seconds_Behind_Master: 0
~~~
es decir es distinto de NULL




# MAESTRO - MAESTRO
## ESCLAVO 
~~~
CREATE USER maestro IDENTIFIED BY 'u4h7j9e3';
GRANT REPLICATION SLAVE ON *.* TO 'maestro'@'%' IDENTIFIED BY 'u4h7j9e3';
FLUSH PRIVILEGES;
FLUSH TABLES;
FLUSH TABLES WITH READ LOCK;
~~~


CREATE USER maestro IDENTIFIED BY 123a123a';
GRANT REPLICATION SLAVE ON *.* TO 'maestro'@'%' IDENTIFIED BY '123a123a';
FLUSH PRIVILEGES;
FLUSH TABLES;
FLUSH TABLES WITH READ LOCK;



update user set user='172.17.0.2' where user='master';

update user set host='%' where user='root';

~~~
SHOW MASTER STATUS;
~~~

CHANGE MASTER TO MASTER_HOST='alvarospunk.ddns.net',MASTER_USER='esclavo', MASTER_PASSWORD='esclavo',MASTER_LOG_FILE='mysql-bin.000010', MASTER_LOG_POS=154,MASTER_PORT=3306;



## MAESTRO 
~~~
donas11.hopto.org


CHANGE MASTER TO MASTER_HOST='172.17.0.3',MASTER_USER='master', MASTER_PASSWORD='u4h7j9e3',MASTER_LOG_FILE='mysql-bin.000010', MASTER_LOG_POS=154,MASTER_PORT=3306;
~~~


CHANGE MASTER TO MASTER_HOST='donas11.hopto.org',MASTER_USER='maestro', MASTER_PASSWORD='123a123a',MASTER_LOG_FILE='mysql-bin.000009', MASTER_LOG_POS=154,MASTER_PORT=1136;
~~~

~~~
SHOW SLAVE STATUS\G
~~~


